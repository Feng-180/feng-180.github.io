<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é­”æ³•æœ¯å¼åŒæ­¥ - ç¦ä¹¦ç›®å½•</title>
    <style>
        :root {
            --s-red: #ff3c3c; --a-gold: #ffaa00; --b-blue: #00f2ff;
            --wind-cyan: #b3ffff;
            --magic-glow: radial-gradient(circle at center, #1a0b2e 0%, #030008 85%);
        }
        * { box-sizing: border-box; -webkit-font-smoothing: antialiased; }
        
        body { 
            background: #030008; background-image: var(--magic-glow);
            color: #f0f0f0; font-family: "Optima", serif;
            margin: 0; min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center;
            overflow-x: hidden; padding: 20px;
        }

        #bg-canvas { position: fixed; inset: 0; z-index: 0; opacity: 0.3; pointer-events: none; }

        .glass-card { 
            position: relative; z-index: 2;
            background: rgba(10, 8, 18, 0.8); 
            border: 1px solid rgba(179, 255, 255, 0.1); 
            padding: 30px; width: 100%; max-width: 400px;
            backdrop-filter: blur(15px); text-align: center;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
        }

        .back-link { color: #444; text-decoration: none; font-size: 11px; letter-spacing: 2px; margin-bottom: 25px; display: block; }
        .back-link:hover { color: var(--wind-cyan); }

        h2 { font-size: 20px; color: var(--wind-cyan); letter-spacing: 5px; margin: 0 0 10px 0; font-weight: normal; }
        
        /* çŠ¶æ€æ˜¾ç¤ºåŒº */
        .status-container { display: flex; justify-content: center; gap: 10px; margin-bottom: 30px; }
        .status-tag { 
            font-size: 10px; padding: 4px 10px; border-radius: 2px;
            background: rgba(179, 255, 255, 0.05); border: 1px solid rgba(179, 255, 255, 0.1);
            color: var(--b-blue);
        }

        /* è‡ªåŠ¨åŒ–æŒ‰é’®ç»„ */
        .action-group { display: flex; flex-direction: column; gap: 15px; }
        
        .btn-magic {
            position: relative; width: 100%; padding: 18px;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(179, 255, 255, 0.2);
            color: #eee; cursor: pointer; transition: 0.3s;
            text-align: center; overflow: hidden;
        }
        .btn-magic:hover { border-color: var(--wind-cyan); background: rgba(179, 255, 255, 0.05); }
        .btn-magic span { display: block; letter-spacing: 3px; font-size: 14px; font-weight: bold; }
        .btn-magic .sub-text { font-size: 9px; color: #555; margin-top: 5px; letter-spacing: 1px; }

        /* ç‰¹æ®Šé«˜äº®æŒ‰é’® */
        .btn-ios { border-left: 3px solid var(--b-blue); }
        .btn-android { border-left: 3px solid var(--a-gold); }
        .btn-copy { border: 1px dashed rgba(179, 255, 255, 0.2); margin-top: 10px; }

        .footer-note { font-size: 9px; color: #333; margin-top: 25px; font-style: italic; letter-spacing: 1px; }
    </style>
</head>
<body>
    <canvas id="bg-canvas"></canvas>

    <div class="glass-card">
        <a href="index.html" class="back-link">â† RETURN_TERMINAL</a>
        
        <h2>é­”æ³•æœ¯å¼åŒæ­¥</h2>
        
        <div class="status-container">
            <span class="status-tag" id="node-count">NODES: LOADING...</span>
            <span class="status-tag">AUTO_UPDATE</span>
        </div>

        <div class="action-group">
            <div onclick="importShadowrocket()" class="btn-magic btn-ios">
                <span>ä¸€é”®å¯¼å…¥å°ç«ç®­ (iOS)</span>
                <div class="sub-text">SUPPORT: SHADOWROCKET / QUANTUMULT X</div>
            </div>

            <div onclick="importClash()" class="btn-magic btn-android">
                <span>ä¸€é”®å¯¼å…¥ CLASH</span>
                <div class="sub-text">RECOMMEND: ANDROID / WINDOWS / MAC</div>
            </div>

            <div onclick="copyLink()" id="copyBtn" class="btn-magic btn-copy">
                <span>å¤åˆ¶é­”æ³•è®¢é˜…é“¾æ¥</span>
                <div class="sub-text">MANUAL_COPY_PROTOCOL</div>
            </div>
        </div>

        <p class="footer-note">DATA_SYNC_PROTOCOL // 2026 // ç»´åº¦ç¨³å®š</p>
    </div>

    <script>
        // ä½ çš„ GitHub è®¢é˜…é“¾æ¥é…ç½®
        const GITHUB_USER = "feng-180";
        const GITHUB_REPO = "feng-180.github.io";
        const SUB_URL = `https://fastly.jsdelivr.net/gh/${GITHUB_USER}/${GITHUB_REPO}@main/sub_all.txt`;

        // åŠ¨æ€è·å–èŠ‚ç‚¹æ•°é‡ï¼ˆæ¨¡æ‹Ÿæˆ–å®é™…è·å–ï¼‰
        async function updateStatus() {
            try {
                const response = await fetch(SUB_URL);
                const text = await response.text();
                const lines = text.split('\n').filter(l => l.includes('://')).length;
                document.getElementById('node-count').innerText = `NODES: ${lines} ACTIVE`;
            } catch (e) {
                document.getElementById('node-count').innerText = `NODES: CONNECTED`;
            }
        }

        // å°ç«ç®­å¯¼å…¥é€»è¾‘
        function importShadowrocket() {
            const encodedUrl = btoa(unescape(encodeURIComponent(SUB_URL)));
            window.location.href = "shadowrocket://add/sub://" + encodedUrl + "?remark=é£ã®é­”æ³•ç¦ä¹¦å½•";
            alert('ğŸŒ¸ æœ¯å¼ä¼ è¾“ä¸­...è¯·ç¡®è®¤æ˜¯å¦å·²å®‰è£…å°ç«ç®­ã€‚');
        }

        // Clash å¯¼å…¥é€»è¾‘
        function importClash() {
            const finalUrl = `https://sub.id9.cc/sub?target=clash&url=${encodeURIComponent(SUB_URL)}&new_name=Magic_Station`;
            window.location.href = "clash://install-config?url=" + encodeURIComponent(finalUrl);
            alert('ğŸŒ¸ èƒ½é‡åŒæ­¥ä¸­...è¯·ç¡®è®¤æ˜¯å¦å·²å®‰è£…Clashã€‚');
        }

        // å¤åˆ¶é“¾æ¥é€»è¾‘
        function copyLink() {
            navigator.clipboard.writeText(SUB_URL).then(() => {
                const btn = document.getElementById('copyBtn');
                const originalText = btn.innerHTML;
                btn.style.borderColor = "var(--b-blue)";
                btn.innerHTML = "<span>âœ… æœ¯å¼å·²åˆ»å…¥å‰ªè´´æ¿</span><div class='sub-text'>COPY_SUCCESSFUL</div>";
                setTimeout(() => { btn.innerHTML = originalText; btn.style.borderColor = ""; }, 2000);
            });
        }

        // ç²’å­èƒŒæ™¯æ•ˆæœ
        const canvas = document.getElementById("bg-canvas"), ctx = canvas.getContext("2d");
        let w, h;
        function resize() { w = canvas.width = window.innerWidth; h = canvas.height = window.innerHeight; }
        resize(); window.onresize = resize;
        const dots = Array.from({length: 30}, () => ({ x: Math.random()*w, y: Math.random()*h, r: Math.random()*1.2, s: Math.random()*0.1+0.05 }));
        function draw() {
            ctx.fillStyle = "rgba(3, 0, 8, 0.4)"; ctx.fillRect(0, 0, w, h);
            dots.forEach(d => {
                d.y -= d.s; if(d.y < 0) d.y = h;
                ctx.beginPath(); ctx.arc(d.x, d.y, d.r, 0, Math.PI*2);
                ctx.fillStyle = "rgba(179, 255, 255, 0.05)"; ctx.fill();
            });
            requestAnimationFrame(draw);
        }
        updateStatus();
        draw();
    </script>
</body>
</html>