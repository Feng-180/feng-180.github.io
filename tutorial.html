<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#05020a">
  <title>é£ã®é­”æ³•ä¹¦ | USER MANUAL</title>
  <style>
    :root {
      --cyan: #00f2ff;
      --pink: #ff0055;
      --void: #05020a;
      --card-bg: rgba(20, 25, 35, 0.6);
      --font-code: "JetBrains Mono", "Consolas", monospace;
      --font-main: "PingFang SC", system-ui, sans-serif;
      --wechat: #09b83e;
      --alipay: #1677dd;
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }

    body {
      margin: 0; background: var(--void); color: #fff;
      font-family: var(--font-main);
      min-height: 100vh;
      display: flex; flex-direction: column; align-items: center;
      overflow-x: hidden;
      padding-bottom: 60px;
      /* ç½‘æ ¼åº•çº¹ */
      background-image: 
        linear-gradient(rgba(0, 242, 255, 0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 242, 255, 0.05) 1px, transparent 1px);
      background-size: 30px 30px;
    }

    #bg-canvas { position: fixed; inset: 0; z-index: 0; pointer-events: none; }

    /* --- å¤´éƒ¨åŒºåŸŸ --- */
    .header-group {
      margin-top: 60px; margin-bottom: 40px; text-align: center; z-index: 2;
    }
    
    .main-title {
      font-size: 32px; font-weight: 800; color: #fff; margin: 0;
      text-transform: uppercase; letter-spacing: 4px;
      text-shadow: 2px 2px 0px var(--pink), -2px -2px 0px var(--cyan);
      animation: glitch-skew 3s infinite linear alternate-reverse;
    }

    .sub-badge {
      display: inline-block; margin-top: 15px;
      font-family: var(--font-code); font-size: 10px; color: var(--cyan);
      border: 1px solid var(--cyan); padding: 4px 12px;
      background: rgba(0, 242, 255, 0.05); border-radius: 20px;
      box-shadow: 0 0 10px rgba(0, 242, 255, 0.2);
    }

    /* --- å®¹å™¨ --- */
    .container { width: 90%; max-width: 500px; z-index: 2; display: flex; flex-direction: column; gap: 25px; }

    /* --- å¡ç‰‡é€šç”¨æ ·å¼ --- */
    .card {
      background: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 12px;
      padding: 25px; position: relative; overflow: hidden;
      backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
      transition: 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    
    .card:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }

    /* æ­¥éª¤è§’æ ‡ */
    .step-tag {
      position: absolute; top: 0; left: 0;
      font-family: var(--font-code); font-size: 10px; font-weight: bold;
      padding: 6px 12px; border-bottom-right-radius: 8px;
      background: rgba(255,255,255,0.05); border-right: 1px solid rgba(255,255,255,0.1);
      border-bottom: 1px solid rgba(255,255,255,0.1); color: #888;
    }

    /* --- æ”¯ä»˜å¡ç‰‡ (æ”¯ä»˜/è”ç³») --- */
    .card.highlight {
      border: 1px solid rgba(255, 0, 85, 0.3);
      background: linear-gradient(160deg, rgba(255,0,85,0.05) 0%, rgba(10,10,15,0.9) 100%);
    }
    .card.highlight .step-tag { color: var(--pink); background: rgba(255, 0, 85, 0.1); }

    .pay-header { text-align: center; margin: 15px 0 20px; }
    .pay-title { font-size: 18px; font-weight: bold; letter-spacing: 2px; }
    .pay-sub { font-size: 10px; color: var(--pink); opacity: 0.8; margin-top: 5px; font-family: var(--font-code); }

    /* --- æ”¯ä»˜æ–¹å¼åˆ‡æ¢ --- */
    .pay-tabs {
      display: flex; gap: 10px; margin-bottom: 20px; justify-content: center;
    }

    .pay-tab {
      padding: 8px 16px; border: 1px solid rgba(255,255,255,0.2);
      background: rgba(255,255,255,0.05); border-radius: 6px;
      cursor: pointer; font-size: 12px; font-weight: bold;
      transition: 0.3s; color: #aaa;
      font-family: var(--font-code);
    }

    .pay-tab.active {
      border-color: var(--cyan); background: rgba(0, 242, 255, 0.1);
      color: var(--cyan); box-shadow: 0 0 15px rgba(0, 242, 255, 0.2);
    }

    .pay-tab.wechat.active {
      border-color: var(--wechat); background: rgba(9, 184, 62, 0.1);
      color: var(--wechat); box-shadow: 0 0 15px rgba(9, 184, 62, 0.2);
    }

    .pay-tab.alipay.active {
      border-color: var(--alipay); background: rgba(22, 119, 221, 0.1);
      color: var(--alipay); box-shadow: 0 0 15px rgba(22, 119, 221, 0.2);
    }

    /* æ‰«æä»ªæ•ˆæœ */
    .scanner-box {
      width: 220px; height: 220px; margin: 0 auto 25px;
      position: relative; padding: 10px;
      background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1);
      display: flex; align-items: center; justify-content: center;
      cursor: pointer; transition: 0.3s;
    }

    .scanner-box:hover {
      border-color: var(--cyan); box-shadow: 0 0 20px rgba(0, 242, 255, 0.2);
    }

    /* æ‰«æä»ªå››è§’ */
    .corner {
      position: absolute; width: 15px; height: 15px;
      border-color: var(--pink); border-style: solid; transition: 0.3s;
    }
    .tl { top: -1px; left: -1px; border-width: 2px 0 0 2px; }
    .tr { top: -1px; right: -1px; border-width: 2px 2px 0 0; }
    .bl { bottom: -1px; left: -1px; border-width: 0 0 2px 2px; }
    .br { bottom: -1px; right: -1px; border-width: 0 2px 2px 0; }
    
    .scanner-box:hover .corner { width: 25px; height: 25px; box-shadow: 0 0 10px var(--pink); }

    .qr-img {
      width: 100%; height: 100%; object-fit: contain; display: block;
      background: repeating-linear-gradient(45deg, #111, #111 10px, #222 10px, #222 20px);
    }
    
    /* æ‰«æå…‰çº¿ */
    .scan-beam {
      position: absolute; top: 0; left: 0; width: 100%; height: 2px;
      background: var(--pink); box-shadow: 0 0 15px var(--pink), 0 0 30px var(--pink);
      animation: scan 2.5s ease-in-out infinite; opacity: 0.8; pointer-events: none;
    }

    /* æ”¯ä»˜æ–¹å¼æŒ‡ç¤º */
    .pay-method-label {
      position: absolute; bottom: 8px; right: 8px;
      font-size: 10px; font-weight: bold; font-family: var(--font-code);
      padding: 4px 8px; background: rgba(0,0,0,0.6); border-radius: 3px;
      border: 1px solid currentColor;
    }

    .scanner-box.wechat .pay-method-label {
      color: var(--wechat); border-color: var(--wechat);
    }

    .scanner-box.alipay .pay-method-label {
      color: var(--alipay); border-color: var(--alipay);
    }

    .btn-action {
      width: 100%; padding: 16px; border: none;
      background: var(--pink); color: #fff;
      font-size: 14px; font-weight: bold; letter-spacing: 2px;
      clip-path: polygon(10px 0, 100% 0, 100% 100%, 0 100%, 0 10px);
      cursor: pointer; transition: 0.2s;
      display: flex; align-items: center; justify-content: center; gap: 8px;
    }
    .btn-action:active { transform: scale(0.98); filter: brightness(0.9); }
    .btn-action i { font-style: normal; font-family: sans-serif; }

    .tip-text {
      font-size: 11px; color: #888; text-align: center; margin-top: 15px; line-height: 1.6;
    }
    .tip-text b { color: var(--pink); font-family: var(--font-code); }

    /* --- æ™®é€šæ­¥éª¤å†…å®¹ --- */
    .step-body { padding-top: 15px; }
    .step-title { font-size: 15px; color: var(--cyan); font-weight: bold; margin-bottom: 8px; display: flex; align-items: center; gap: 8px; }
    .step-desc { font-size: 13px; color: #aaa; line-height: 1.6; text-align: justify; }
    
    .link { color: #fff; text-decoration: none; border-bottom: 1px dotted var(--cyan); transition: 0.3s; }
    .link:hover { color: var(--cyan); border-bottom-style: solid; }

    /* --- åº•éƒ¨è¿”å› --- */
    .footer-nav { margin-top: 30px; text-align: center; z-index: 5; }
    .btn-back {
      padding: 10px 30px; border: 1px solid rgba(255,255,255,0.2);
      border-radius: 50px; color: #666; font-size: 12px; letter-spacing: 1px;
      text-decoration: none; transition: 0.3s;
    }
    .btn-back:hover { border-color: var(--cyan); color: var(--cyan); background: rgba(0, 242, 255, 0.05); }

    /* --- å…¨å±é¢„è§ˆæ¨¡æ€æ¡† --- */
    .modal-overlay {
      position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 9999;
      display: none; justify-content: center; align-items: center;
      opacity: 0; transition: 0.3s;
    }

    .modal-overlay.show {
      display: flex; opacity: 1;
    }

    .modal-content {
      position: relative; max-width: 90vw; max-height: 90vh;
    }

    .modal-img {
      width: 100%; height: 100%; object-fit: contain;
    }

    .modal-close {
      position: absolute; top: 20px; right: 20px;
      width: 40px; height: 40px; background: rgba(255,255,255,0.1);
      border: 1px solid var(--cyan); border-radius: 50%;
      color: var(--cyan); font-size: 24px; cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      transition: 0.3s;
    }

    .modal-close:hover {
      background: rgba(0, 242, 255, 0.2); box-shadow: 0 0 15px rgba(0, 242, 255, 0.3);
    }

    .modal-tip {
      position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
      background: rgba(0,0,0,0.8); color: var(--cyan); padding: 10px 20px;
      border-radius: 4px; font-size: 12px; font-family: var(--font-code);
      border: 1px solid var(--cyan);
    }

    /* --- åŠ¨ç”» --- */
    @keyframes scan { 0% { top: 5%; opacity: 0; } 10% { opacity: 1; } 90% { opacity: 1; } 100% { top: 95%; opacity: 0; } }
    @keyframes glitch-skew {
      0% { transform: skew(0deg); } 20% { transform: skew(-1deg); } 40% { transform: skew(1deg); } 60% { transform: skew(-0.5deg); } 80% { transform: skew(0.5deg); } 100% { transform: skew(0deg); }
    }

    /* --- Toast --- */
    #toast {
      position: fixed; top: 30px; left: 50%; transform: translateX(-50%) translateY(-20px);
      background: rgba(10, 15, 20, 0.95); border: 1px solid var(--pink);
      color: #fff; padding: 12px 25px; border-radius: 4px;
      font-family: var(--font-code); font-size: 12px; z-index: 9998;
      opacity: 0; pointer-events: none; transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      box-shadow: 0 5px 20px rgba(255, 0, 85, 0.2);
      display: flex; align-items: center; gap: 8px;
    }
    #toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }

    /* éšè—çš„æ”¯ä»˜äºŒç»´ç  */
    .hidden-qr { display: none; }
  </style>
</head>
<body>

  <canvas id="bg-canvas"></canvas>

  <div id="toast">
    <div style="width:8px; height:8px; background:var(--pink); border-radius:50%;"></div>
    <span id="toast-text">SYSTEM NOTICE</span>
  </div>

  <!-- å…¨å±é¢„è§ˆæ¨¡æ€æ¡† -->
  <div class="modal-overlay" id="qrModal">
    <div class="modal-content">
      <img id="modalQrImg" class="modal-img" src="" alt="QR Code">
      <div class="modal-close" onclick="closeQrModal()">âœ•</div>
      <div class="modal-tip">é•¿æŒ‰ä¿å­˜æˆ–æˆªå›¾ Â· ä½¿ç”¨æ‰‹æœºæ‰«æ</div>
    </div>
  </div>

  <div class="header-group">
    <h1 class="main-title">é£ã®é­”æ³•ä¹¦</h1>
    <div class="sub-badge">SYSTEM: USER_GUIDE_V3.1</div>
  </div>

  <div class="container">
    
    <div class="card highlight">
      <div class="step-tag">PROTOCOL_01 // PAYMENT</div>
      
      <div class="pay-header">
        <div class="pay-title">è·å–æƒé™é€šè¡Œè¯</div>
        <div class="pay-sub">SCAN TO UNLOCK DATABASE</div>
      </div>

      <!-- æ”¯ä»˜æ–¹å¼åˆ‡æ¢ -->
      <div class="pay-tabs">
        <div class="pay-tab wechat active" onclick="switchPayMethod('wechat')">
          ğŸ’š å¾®ä¿¡æ”¯ä»˜
        </div>
        <div class="pay-tab alipay" onclick="switchPayMethod('alipay')">
          ğŸ’™ æ”¯ä»˜å®
        </div>
      </div>
      
      <!-- äºŒç»´ç æ‰«æåŒº -->
      <div class="scanner-box wechat" id="scannerBox" onclick="openQrModal()">
        <div class="corner tl"></div><div class="corner tr"></div>
        <div class="corner bl"></div><div class="corner br"></div>
        <div class="scan-beam"></div>
        <img src="skm.jpg" alt="WeChat QR Code" class="qr-img" id="qrDisplay" onerror="this.style.display='none'">
        <div class="pay-method-label" id="methodLabel">WECHAT</div>
      </div>

      <!-- éšè—çš„æ”¯ä»˜å®äºŒç»´ç ï¼ˆå¦‚æœæœ‰ï¼‰ -->
      <img src="skm.jpg" alt="Alipay QR Code" class="hidden-qr" id="alipayQr">
      
      <button onclick="handleContact()" class="btn-action">
        å·²æ”¯ä»˜ &raquo; å”¤é†’ç«™é•¿
      </button>

      <div class="tip-text">
        <span style="color:var(--cyan); display:block; margin-bottom:5px;">âš ï¸ æ“ä½œæŒ‡å¼•</span>
        è¯†åˆ«ä¸Šæ–¹é˜µæ³•å®Œæˆå¥‘çº¦ Â· ç³»ç»Ÿå°†è‡ªåŠ¨å¤åˆ¶<br>
        UID: <b>2902939692</b> å¹¶å°è¯•å»ºç«‹è¿æ¥
      </div>
    </div>

    <div class="card">
      <div class="step-tag">PROTOCOL_02 // SYNC</div>
      <div class="step-body">
        <div class="step-title">åŒæ­¥é­”æ³•é˜µåœ°</div>
        <div class="step-desc">
          è¿”å› <a href="index.html" class="link">ä¸»æ§å°</a>ï¼Œå¯åŠ¨ <b>ã€é­”æ³•é˜µåœ°ã€‘</b> æ¨¡å—ã€‚åŠ å…¥æ ¸å¿ƒç¾¤ç»„ï¼Œè¿™æ˜¯æ¥æ”¶å®æ—¶é€šå‘Šä¸è·å–æœ€æ–°æœ¯å¼ï¼ˆæ›´æ–°æ—¥å¿—ï¼‰çš„å”¯ä¸€å®‰å…¨æ¸ é“ã€‚
        </div>
      </div>
    </div>

    <div class="card">
      <div class="step-tag">PROTOCOL_03 // DECRYPT</div>
      <div class="step-body">
        <div class="step-title">è§£æ„èŠ‚ç‚¹æœ¯å¼</div>
        <div class="step-desc">
          è¿”å› <a href="index.html" class="link">ä¸»æ§å°</a>ï¼Œå¯åŠ¨ <b>ã€ç¥ç§˜èŠ‚ç‚¹ã€‘</b>ã€‚è¾“å…¥ç«™é•¿å‘æ”¾çš„ <code>ACCESS KEY</code>ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è§£å¯†å…¨çƒé«˜é€ŸèŠ‚ç‚¹åˆ—è¡¨ã€‚
        </div>
      </div>
    </div>

    <div class="footer-nav">
      <a href="index.html" class="btn-back">TERMINATE SESSION // è¿”å›</a>
    </div>
  </div>

  <script>
    // --- 1. ç²’å­ç½‘ç»œèƒŒæ™¯ ---
    const cvs = document.getElementById('bg-canvas'), ctx = cvs.getContext('2d');
    let w, h, dots = [];

    function initCvs() {
      w = cvs.width = window.innerWidth;
      h = cvs.height = window.innerHeight;
      dots = [];
      const cnt = w < 600 ? 30 : 60;
      for(let i=0; i<cnt; i++) {
        dots.push({
          x: Math.random()*w, y: Math.random()*h,
          vx: (Math.random()-0.5)*0.5, vy: (Math.random()-0.5)*0.5,
          r: Math.random()*1.5
        });
      }
    }

    function draw() {
      ctx.clearRect(0,0,w,h);
      ctx.fillStyle = "rgba(0, 242, 255, 0.4)";
      
      for(let i=0; i<dots.length; i++) {
        let d = dots[i];
        d.x += d.vx; d.y += d.vy;
        if(d.x<0 || d.x>w) d.vx*=-1;
        if(d.y<0 || d.y>h) d.vy*=-1;
        
        ctx.beginPath(); ctx.arc(d.x, d.y, d.r, 0, Math.PI*2); ctx.fill();

        // è¿çº¿æ•ˆæœ
        for(let j=i+1; j<dots.length; j++) {
          let d2 = dots[j];
          let dist = Math.hypot(d.x-d2.x, d.y-d2.y);
          if(dist < 100) {
            ctx.beginPath();
            ctx.strokeStyle = `rgba(0, 242, 255, ${0.2 * (1 - dist/100)})`;
            ctx.lineWidth = 0.5;
            ctx.moveTo(d.x, d.y); ctx.lineTo(d2.x, d2.y); ctx.stroke();
          }
        }
      }
      requestAnimationFrame(draw);
    }
    window.addEventListener('resize', initCvs);
    initCvs(); draw();

    // --- 2. æ”¯ä»˜æ–¹å¼åˆ‡æ¢é€»è¾‘ ---
    const CONFIG = { qq: "2902939692", currentMethod: 'wechat' };

    function switchPayMethod(method) {
      CONFIG.currentMethod = method;
      
      // æ›´æ–°æ ‡ç­¾é¡µæ ·å¼
      document.querySelectorAll('.pay-tab').forEach(tab => {
        tab.classList.remove('active');
      });
      event.target.closest('.pay-tab').classList.add('active');

      // æ›´æ–°æ‰«ææ¡†æ ·å¼å’ŒäºŒç»´ç 
      const scannerBox = document.getElementById('scannerBox');
      scannerBox.classList.remove('wechat', 'alipay');
      scannerBox.classList.add(method);

      const methodLabel = document.getElementById('methodLabel');
      methodLabel.textContent = method === 'wechat' ? 'WECHAT' : 'ALIPAY';

      // è¿™é‡Œå¯ä»¥åŠ è½½ä¸åŒçš„äºŒç»´ç å›¾ç‰‡
      // ç›®å‰ä½¿ç”¨åŒä¸€å¼ å›¾ç‰‡ï¼Œå®é™…ä½¿ç”¨æ—¶å¯ä»¥æ›¿æ¢ä¸ºä¸åŒçš„æ”¶æ¬¾ç 
      showToast(`å·²åˆ‡æ¢è‡³${method === 'wechat' ? 'å¾®ä¿¡' : 'æ”¯ä»˜å®'}æ”¯ä»˜`);
    }

    function showToast(msg) {
      const t = document.getElementById('toast');
      document.getElementById('toast-text').innerText = msg;
      t.classList.add('show');
      setTimeout(() => t.classList.remove('show'), 2000);
    }

    // --- 3. å…¨å±é¢„è§ˆäºŒç»´ç  ---
    function openQrModal() {
      const modal = document.getElementById('qrModal');
      const qrDisplay = document.getElementById('qrDisplay');
      const modalQrImg = document.getElementById('modalQrImg');
      
      modalQrImg.src = qrDisplay.src;
      modal.classList.add('show');
      showToast('é•¿æŒ‰ä¿å­˜äºŒç»´ç æˆ–æˆªå›¾');
    }

    function closeQrModal() {
      const modal = document.getElementById('qrModal');
      modal.classList.remove('show');
    }

    // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
    document.getElementById('qrModal').addEventListener('click', (e) => {
      if(e.target.id === 'qrModal') closeQrModal();
    });

    // --- 4. æ”¯ä»˜åè”ç³»é€»è¾‘ ---
    async function handleContact() {
      // 1. å°è¯•å¤åˆ¶ QQ
      try {
        await navigator.clipboard.writeText(CONFIG.qq);
        showToast(`QQ ${CONFIG.qq} å·²å¤åˆ¶`);
      } catch (err) {
        // é™çº§å¤åˆ¶
        const ta = document.createElement('textarea');
        ta.value = CONFIG.qq;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        document.body.removeChild(ta);
        showToast("è”ç³»æ–¹å¼å·²å¤åˆ¶");
      }

      // 2. åˆ¤æ–­è®¾å¤‡è·³è½¬
      setTimeout(() => {
        const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
        if (isMobile) {
          // æ‰‹æœºç«¯å°è¯•æ‹‰èµ· QQ
          window.location.href = `mqqapi://card/show_pslcard?src_type=internal&version=1&uin=${CONFIG.qq}&card_type=person&source=qrcode`;
        } else {
          // PCç«¯æç¤ºæˆ–è·³è½¬ç½‘é¡µ
          const choice = confirm("å·²å¤åˆ¶ç«™é•¿QQã€‚\næ˜¯å¦å°è¯•æ‰“å¼€ QQ ç½‘é¡µç‰ˆæ·»åŠ ï¼Ÿ");
          if(choice) {
            window.open(`tencent://message/?uin=${CONFIG.qq}&Site=Sambow&Menu=yes`, '_blank');
          }
        }
      }, 1200);
    }

    // --- 5. é”®ç›˜å¿«æ·é”®å…³é—­æ¨¡æ€æ¡† ---
    document.addEventListener('keydown', (e) => {
      if(e.key === 'Escape') closeQrModal();
    });
  </script>
</body>
</html>
